<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bootstrap demo</title>
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" /> -->
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/all.min.css">
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <!-- <div class="row mb-4 align-items-center">
    
    <div class="main bg-black text-white py-3 d-flex  ">
    
      <a href="#" class="fs-2 text-white "><i class="fa-brands fa-apple"></i></a>
      <h2 class=" m-0"> Mac all product</h2>
        <a href="cart.html" class="text-white fs-4"><i class="fa-solid fa-cart-shopping"></i></a>
      
    </div>
  </div> -->


  <div class="main bg-black mb-4">
    <div class="container">
      <div class="row d-flex align-items-center py-3">
        <div class="col-6 d-flex fs-2 text-white">
          <i class="fa-brands fa-apple"></i>
          <h2 class="d-flex fs-1 ms-3">Mac all product</h2>
        </div>
        <div class="col-6 m-0 justify-content-end d-flex">
          <button class="btn btn-light text-black " type="button" data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasExample" aria-controls="offcanvasExample">
            <i class="fa-solid fa-cart-shopping fs-5"></i>
          </button>
          <!-- <a href="cart.html" class="d-flex text-white fs-3 justify-content-end"><i class="fa-solid fa-cart-shopping"></i></a> -->
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="row" id="products"></div>
  </div>








  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-header ">
      <h3 class="offcanvas-title" id="offcanvasExampleLabel">Purchase product</h3>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">

      <div class="row">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">Srno</th>
              <th scope="col">Name</th>
              <th scope="col">Image</th>
              <th scope="col">Price</th>
              <th scope="col">Qty</th>
              <th scope="col">delete</th>
              <th scope="col">Total</th>

            </tr>
          </thead>
          <tbody id="carts">

          </tbody>
        </table>
        <h2 id="ftotal"></h2>
      </div>
    </div>
  </div>


  <script>
    let products = [
      {
        id: 1,
        name: "Airpods Pro",
        price: 22999,
        qty: 1,
        image:
          "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR433XejCt2_Hpm8N5XaUdV7xmxthjC37PT7A&s",
      },
      {
        id: 2,
        name: "Apple Watch",
        price: 28899,
        qty: 1,
        image:
          "https://www.apple.com/newsroom/images/product/watch/standard/Apple_delivers-apple-watch-series-6_09152020.jpg.news_app_ed.jpg",
      },
      {
        id: 3,
        name: "iPhone 15 Pro",
        price: 69999,
        qty: 1,
        image:
          "https://media-ik.croma.com/prod/https://media.croma.com/image/upload/v1708670560/Croma%20Assets/Communication/Mobiles/Images/243459_0_cvj2b5.png?tr=w-600",
      },
      {
        id: 4,
        name: "Apple iPad Pro",
        price: 34900,
        qty: 1,
        image:
          "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR-cUmUiDP7Qu1IFTjLr7UFbR4ULa6MJn8WDA&s",
      },

      {
        id: 5,
        name: "AirPods Max Headphones ",
        price: 52849,
        qty: 1,
        image:
          "https://m.media-amazon.com/images/I/81fm78oPL5L._AC_UF350,350_QL80_.jpg",
      },
      {
        id: 6,
        name: "iPhone 15 Flip ",
        price: 150000,
        qty: 1,
        image:
          "https://www.cnet.com/a/img/resize/1c9e01699c1f1980483c2dfc630ecc51f3fe931f/hub/2021/08/09/b8621a1d-7623-42f0-9ae6-174317cd6625/apple-foldable-iphone-concept-art.png?auto=webp&fit=crop&height=1200&width=1200",
      },
      {
        id: 7,
        name: "Macbook Pro",
        price: 125000,
        qty: 1,
        image:
          "https://static.toiimg.com/thumb/msid-97249114,width-400,resizemode-4/97249114.jpg",
      },
      {
        id: 8,
        name: " Apple HomePod mini",
        price: 5000,
        qty: 1,
        image:
          "https://i.ebayimg.com/images/g/AH0AAOSwkolgauQe/s-l1200.jpg",
      },
    ];

    const viewProduct = () => {
      let tbl = "";
      products.map((val, index) => {
        tbl += `
                            <div class="col-lg-3">
                                <div class="card mb-4 bg-black">
                                    <img src="${val.image}" class="card-img-top p-3 " alt="..." />
                                    <div class="card-body">
                                    <h5 class="card-title text-white">${val.name}</h5>
                                    <p class="card-text text-white">Rs :- ${val.price}</p>
                                    <button onclick="addToCart(${val.id})" class="btn btn-dark"><i class="fa-solid fa-cart-shopping"></i></button>
                                    </div>
                                </div>
                            </div>
                        `;
      });
      document.getElementById('products').innerHTML = tbl;
    };

    viewProduct();

    let cart = [];
    const addToCart = (pid) => {
      products.map((val) => {
        if (val.id == pid) {
          cart.push(val);
          localStorage.setItem('cart', JSON.stringify(cart))
        }
      })
    }

  </script>

  <script>
    const viewCart = () => {
      let allcart = JSON.parse(localStorage.getItem('cart'))
      let tbl = "";
      let sum = 0;

      allcart.map((val, index) => {
        sum = sum + val.price * val.qty;
        tbl += `
                          <tr>
                            <td>${++index}</td>
                            <td>${val.name}</td>
                            <td>
                              <img src="${val.image}" width="100"/>
                            </td>
                            <td>${val.price}</td>
                            <td style="width: 73px; ">
                              <input class="form-control" id="qty_${val.id}" onchange="editCart(${val.id})" value="${val.qty}" type="number"/>
                            </td>
                            <td> <button onclick="deleteRecord(${val.id})" class="text-danger p-2 bg-white border"><i class="fa-solid fa-trash"></i></button></td>
                            <td>${val.price * val.qty}</td>
                            
                          </tr>
                        `
      })
      document.getElementById('carts').innerHTML = tbl;
      document.getElementById('ftotal').innerHTML = `Total = ${sum}`


    }

    viewCart();

    const editCart = (id) => {
      const qty = document.getElementById(`qty_${id}`).value;

      let allcart = JSON.parse(localStorage.getItem('cart'));
      let up = allcart.map((val) => {
        if (val.id == id) {
          val.qty = qty
        }
        return val;
      })

      localStorage.setItem('cart', JSON.stringify(up));
      alert("add one more")
      viewCart();

    }

    const deleteRecord = (id) => {
      let allcart = JSON.parse(localStorage.getItem('cart')) || [];
      let updatedCart = allcart.filter(val => val.id != id);
      localStorage.setItem('cart', JSON.stringify(updatedCart));
      viewCart();
    }

  </script>


  <script src="js/bootstrap.bundle.js"></script>





</body>

</html>